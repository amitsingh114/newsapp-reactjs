{"ast":null,"code":"import React,{useEffect,useState}from'react';import Loading from'./Loading';import NewsItems from'./NewsItems';import InfiniteScroll from\"react-infinite-scroll-component\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";const News=props=>{const[articles,setArticles]=useState([]);const[loading,setLoading]=useState(true);const[page,setPage]=useState(1);const[totalResults,setTotalResults]=useState(0);const updateNews=async()=>{props.setProgress(10);const url=\"https://newsapi.org/v2/top-headlines?country=\".concat(props.country,\"&category=\").concat(props.category,\"&apiKey=27c3bf30833642eba9862221c821f5ad&page=\").concat(page,\"&pageSize=12\");setLoading(true);const data=await fetch(url);props.setProgress(30);const parsedData=await data.json();props.setProgress(70);console.log(parsedData);setArticles(parsedData.articles);setTotalResults(parsedData.totalResults);setLoading(false);props.setProgress(100);};useEffect(()=>{updateNews();},[]);const fetchMoreData=async()=>{const url=\"https://newsapi.org/v2/top-headlines?country=\".concat(props.country,\"&category=\").concat(props.category,\"&apiKey=27c3bf30833642eba9862221c821f5ad&page=\").concat(page+1,\"&pageSize=12\");setPage(page+1);const data=await fetch(url);const parsedData=await data.json();console.log(parsedData);setArticles(articles.concat(parsedData.articles));setTotalResults(parsedData.totalResults);};// const prevPg = async ()=>{\n//   setPage(page - 1)\n//   updateNews();\n// } \n// const nxtPg = async ()=>{\n//   if (page + 1 > Math.ceil(totalResults/12)) {\n//   } else {\n//     setPage(page + 1)\n//     updateNews();\n//   }\n// } \nreturn/*#__PURE__*/_jsx(_Fragment,{children:/*#__PURE__*/_jsxs(\"div\",{className:\"container my-3\",children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Headlines\"}),loading&&/*#__PURE__*/_jsx(Loading,{}),/*#__PURE__*/_jsx(InfiniteScroll,{dataLength:articles.length,next:fetchMoreData,hasMore:articles.length!==totalResults,loader:/*#__PURE__*/_jsx(Loading,{}),children:/*#__PURE__*/_jsx(\"div\",{className:\"container\",children:/*#__PURE__*/_jsx(\"div\",{className:\"row\",children:articles.map(element=>{return/*#__PURE__*/_jsx(\"div\",{className:\"col-md-4\",children:/*#__PURE__*/_jsx(NewsItems,{title:element.title?element.title.slice(0,50):\"\",description:element.description?element.description.slice(0,50):\"\",imgUrl:element.urlToImage,newsUrl:element.url})},element.url);})})})})]})});};News.defaultProps={country:'us',pageSize:12,category:'general'};export default News;","map":{"version":3,"names":["React","useEffect","useState","Loading","NewsItems","InfiniteScroll","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","News","props","articles","setArticles","loading","setLoading","page","setPage","totalResults","setTotalResults","updateNews","setProgress","url","concat","country","category","data","fetch","parsedData","json","console","log","fetchMoreData","children","className","dataLength","length","next","hasMore","loader","map","element","title","slice","description","imgUrl","urlToImage","newsUrl","defaultProps","pageSize"],"sources":["/home/rambo/newsapp-reactjs/src/Components/News.js"],"sourcesContent":["import React, {useEffect, useState} from 'react'\r\nimport Loading from './Loading';\r\nimport NewsItems from './NewsItems'\r\nimport PropTypes from 'prop-types';\r\nimport InfiniteScroll from \"react-infinite-scroll-component\";\r\n\r\nconst News = (props)=> {\r\n\r\n  const [articles, setArticles] = useState([])\r\n  const [loading, setLoading] = useState(true)\r\n  const [page, setPage] = useState(1)\r\n  const [totalResults, setTotalResults] = useState(0)\r\n\r\n\r\n  const updateNews = async()=>{\r\n    props.setProgress(10);\r\n    const url = `https://newsapi.org/v2/top-headlines?country=${props.country}&category=${props.category}&apiKey=27c3bf30833642eba9862221c821f5ad&page=${page}&pageSize=12`;\r\n    setLoading(true)\r\n      const data = await fetch(url);\r\n      props.setProgress(30);\r\n      const parsedData = await data.json();\r\n      props.setProgress(70);\r\n      console.log(parsedData);\r\n      setArticles(parsedData.articles)\r\n      setTotalResults(parsedData.totalResults)\r\n      setLoading(false)\r\n    props.setProgress(100);\r\n  }\r\n\r\n  useEffect(() => {\r\n    updateNews();\r\n  }, [])\r\n  \r\n  const fetchMoreData = async () =>{\r\n    const url = `https://newsapi.org/v2/top-headlines?country=${props.country}&category=${props.category}&apiKey=27c3bf30833642eba9862221c821f5ad&page=${page+1}&pageSize=12`;\r\n    setPage(page + 1)\r\n      const data = await fetch(url);\r\n      const parsedData = await data.json();\r\n      console.log(parsedData);\r\n      setArticles(articles.concat(parsedData.articles))\r\n      setTotalResults(parsedData.totalResults)\r\n      \r\n  }\r\n\r\n  // const prevPg = async ()=>{\r\n  //   setPage(page - 1)\r\n  //   updateNews();\r\n  // } \r\n\r\n  // const nxtPg = async ()=>{\r\n    \r\n  //   if (page + 1 > Math.ceil(totalResults/12)) {\r\n        \r\n  //   } else {\r\n  //     setPage(page + 1)\r\n  //     updateNews();\r\n  //   }\r\n  // } \r\n\r\n\r\n    \r\n    return (\r\n      <>\r\n          \r\n        <div className='container my-3'>\r\n          <h2>Headlines</h2>\r\n          {loading && <Loading/>}\r\n          <InfiniteScroll\r\n          dataLength={articles.length}\r\n          next={fetchMoreData}\r\n          hasMore={articles.length !== totalResults}\r\n          loader={<Loading/>}\r\n        >\r\n          \r\n          <div className='container'>\r\n          <div className='row'>\r\n            {articles.map((element)=>{\r\n              return <div className='col-md-4' key={element.url}>\r\n              <NewsItems title={element.title?element.title.slice(0,50):\"\"} description={element.description?element.description.slice(0,50):\"\"} imgUrl={element.urlToImage} newsUrl={element.url}/>\r\n            </div>\r\n            })}\r\n            \r\n          </div>\r\n          </div>\r\n          </InfiniteScroll>\r\n          {/* <div className=\"container d-flex justify-content-between\">   \r\n          <button type=\"button\" disabled={page<=1} onClick={prevPg} className=\"btn btn-dark\">&larr; Previous</button>\r\n          <button type=\"button\" disabled={page + 1 > Math.ceil(totalResults/12)} onClick={nxtPg} className=\"btn btn-dark\">Next &rarr;</button>\r\n            </div>          */}\r\n        </div>\r\n        \r\n      </>\r\n    )\r\n}\r\n\r\nNews.defaultProps = {\r\n  country: 'us',\r\n  pageSize: 12,\r\n  category: 'general',\r\n}\r\n\r\nNews.propTypes = {\r\n  country:  PropTypes.string,\r\n  pageSize:  PropTypes.number,\r\n  category:  PropTypes.string,\r\n}\r\n\r\nexport default News"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}